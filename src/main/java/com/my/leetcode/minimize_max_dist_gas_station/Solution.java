package com.my.leetcode.minimize_max_dist_gas_station;

public class Solution {

    public static void main(String[] args) {
        System.out.println(new Solution().minmaxGasDist(new int[]{0, 60, 100}, 5));
        //15
        System.out.println(new Solution().minmaxGasDist(new int[]{0,2,16,18,44,63,80,84,90,94}, 9));
        //6.5
        System.out.println(new Solution().minmaxGasDist(new int[]{0, 60, 100}, 3));
        //20.0
        System.out.println(new Solution().minmaxGasDist(new int[]{1, 2, 3, 4, 5, 6, 7, 8, 9, 10}, 9));
        //0.5
        System.out.println(new Solution().minmaxGasDist(new int[]{0, 60, 100}, 2));
        //30.0
        System.out.println(new Solution().minmaxGasDist(new int[]{41377,76365,103667,142089,159830,198992,210983,241435,298075,324568,541784,588691,674677,714064,720576,787897,864765,968527,999838,1005871,1024138,1056604,1091464,1122893,1141383,1375448,1424948,1433459,1515319,1553996,1555175,1592074,1592322,1605196,1608516,1669474,1797010,1823729,1846188,1866459,1942574,1945589,1948604,1997427,2067630,2094677,2123425,2201781,2220963,2310463,2332173,2402980,2413766,2470121,2500834,2626854,2653543,2670254,2753873,2760792,2794633,2836628,2845317,2896543,2903131,2944226,2981680,3000149,3063688,3075598,3079193,3131040,3159999,3223326,3228696,3311578,3351817,3414501,3544675,3741842,3742408,3899505,3929997,3995974,4005781,4043433,4066899,4218518,4220824,4258908,4300431,4316482,4397658,4466895,4469089,4475397,4626533,4690833,4842546,4852298,4871332,4918018,4957409,5025934,5043734,5162619,5190568,5239765,5246541,5270159,5290748,5320666,5357906,5401803,5461428,5479135,5656712,5786902,5829675,5863059,5880265,5880517,5908378,5964662,6040302,6286227,6371899,6372178,6493751,6566421,6601561,6609682,6721497,6747514,6792615,6821229,6835149,6840428,6928240,6929757,6933607,6960772,6963550,7103910,7117277,7214886,7227307,7242049,7270078,7277227,7358309,7419175,7562393,7609651,7656875,7708329,7798782,7911662,8088783,8278589,8355532,8429066,8439406,8466208,8496157,8548174,8566580,8578879,8581542,8646882,8661292,8782306,8816001,8818916,8839893,8997084,9019461,9154418,9157365,9220594,9224375,9306500,9477885,9499623,9564257,9770823,9785341,9854595,9861557,9870092,10037488,10092789,10113363,10115796,10172045,10191037,10211550,10243913,10250162,10350900,10383888,10418161,10452859,10589774,10692544,10777693,10824313,10888751,10949990,10954196,10998143,11027478,11038339,11113409,11128660,11144289,11211107,11214813,11231685,11331046,11337219,11414021,11463562,11470805,11525431,11708574,11710214,11758105,11805675,11810998,11830593,11833426,11840031,11899155,11982872,12087647,12107189,12185946,12245690,12334214,12343073,12414950,12576019,12579228,12580042,12608924,12614174,12622492,12636175,12700745,12843164,12867452,12877992,12896426,12945896,12958662,12960409,12976001,12983018,12992457,13010079,13016224,13025209,13031502,13118688,13182953,13188724,13194715,13310569,13431224,13532952,13549886,13576720,13606448,13629397,13650296,13654709,13661045,13700234,13700341,13703114,13817016,13817108,13889339,13937942,14109571,14125453,14151784,14205053,14238943,14264276,14303116,14305108,14351619,14407057,14411366,14411973,14430311,14486835,14490724,14599060,14630572,14674641,14744048,14765450,14788478,14820815,14824516,14929658,15031385,15087554,15114687,15165341,15202838,15323407,15333726,15341482,15354015,15383126,15443816,15556441,15596704,15635211,15741610,15752346,15767623,15848596,15944407,15959218,16048340,16060378,16092096,16117734,16123552,16128700,16149824,16170904,16197983,16274646,16447873,16528562,16575559,16580822,16588544,16598443,16759454,16764377,16765412,16877934,16959846,16978927,17044121,17100653,17106318,17115347,17137463,17141966,17187749,17208773,17216375,17265233,17296088,17311484,17330249,17331018,17413509,17420521,17503833,17516090,17541952,17791067,17867073,17887231,17908756,17922852,17925126,17997517,18075117,18081961,18169890,18202782,18258781,18304034,18327262,18344732,18363147,18430008,18765232,18811911,18887242,18942719,19054204,19133772,19190936,19203115,19268089,19333255,19363651,19366709,19428113,19513242,19601819,19603049,19704786,19719179,19796465,19802348,19818960,19846382,19866585,20043654,20161066,20252559,20367622,20407426,20409061,20475117,20483076,20602233,20636011,20671691,20684245,20809380,20835332,21066960,21262598,21274444,21297758,21315525,21326263,21401215,21533707,21534669,21597023,21609602,21705172,21707820,21780277,21791709,21835065,21921825,21935351,21936782,21971235,22000079,22069277,22070729,22087453,22112211,22185186,22213872,22281022,22301170,22454214,22642120,22654597,22675208,22700785,22742584,22796144,22814293,22907114,22960644,22988592,22993431,23001607,23023415,23034304,23085228,23098094,23117439,23218480,23253110,23278702,23391838,23404531,23474240,23491792,23497741,23515253,23526270,23566998,23580983,23586468,23604140,23670810,23792644,23847143,23887390,23913665,23926179,23928697,23937625,23954200,23969072,24009792,24142066,24234044,24306031,24311216,24398573,24428313,24616655,24707960,24805292,24896579,24899709,24915189,24919505,24923098,24990889,25035865,25097309,25165719,25237996,25338727,25454502,25466648,25472537,25495482,25581114,25582909,25600394,25612523,25827129,25884719,25940256,26295337,26305429,26358775,26568972,26574808,26622884,26667007,26751484,26825254,26828745,26890660,26943131,27046607,27161768,27184970,27213396,27237116,27313664,27332060,27397398,27405001,27461432,27464130,27666070,27712975,27730783,27821890,27856884,27976738,28033178,28041347,28199945,28369038,28384779,28393134,28477111,28617737,28688252,28711766,28723039,28734224,28770441,28786592,28865351,28946525,28977519,28995026,29001862,29004830,29006422,29066691,29086961,29095744,29099641,29117479,29125474,29237474,29256691,29387747,29409053,29435336,29466347,29571093,29600690,29704591,30056896,30060879,30155198,30192402,30210644,30336582,30366021,30408765,30412219,30445987,30589970,30599317,30629451,30644499,30687526,30697420,30698724,30700057,30700936,30789571,30812843,30851295,30855004,30880731,30941074,31054136,31086109,31102968,31271214,31289488,31315758,31357192,31497497,31706724,31802567,31817882,31872440,31915161,31949540,31955616,32008096,32177347,32192188,32215509,32242194,32291440,32294355,32327214,32405914,32444717,32530843,32563830,32580855,32584666,32611681,32641451,32648228,32840618,32876298,32929773,32947696,32952471,32982197,33015767,33059832,33166681,33203709,33243774,33287172,33287243,33327571,33345865,33425607,33449921,33493897,33627292,33713244,33736485,33781807,33782175,33788603,33804051,33805725,33863105,33904678,33944656,33960859,33976619,34023626,34079953,34111762,34222145,34222780,34308202,34356428,34423451,34449133,34533835,34639259,34644099,34659143,34734240,34895727,34899870,35009871,35102790,35104674,35209240,35286253,35319626,35527161,35574713,35604545,35711739,35800428,35826914,35858213,35873272,35912696,35936804,35955034,35995819,36036390,36107707,36164852,36211067,36237083,36252211,36258291,36304675,36326061,36382940,36497051,36539054,36615266,36772715,36811754,36887056,37009819,37011985,37028284,37040465,37050663,37100947,37191373,37194117,37266162,37452858,37535676,37572382,37608482,37648015,37670486,37762038,37844013,37890103,37983340,38011024,38012972,38013763,38076578,38138485,38226849,38276579,38292325,38329899,38359333,38366691,38429763,38438478,38590169,38725030,38729618,38878380,38948532,38986861,39001795,39069040,39114255,39141481,39225495,39236700,39310569,39318597,39325539,39370088,39386523,39405216,39407729,39449987,39463787,39473061,39496252,39501059,39552466,39558079,39577786,39674276,39801956,39809027,39824235,39831658,39865616,39895851,39941304,39950643,39960948,39991464,40027169,40052454,40087040,40213612,40277033,40449745,40489771,40519086,40579487,40615154,40661135,40684701,40750004,40829454,40885297,40906605,40914867,40924511,41100653,41256728,41275546,41287784,41345494,41391635,41398309,41427834,41495020,41504983,41565097,41566933,41589177,41677733,41709821,41781676,41784441,41786936,41830346,41854735,41859254,41928988,42080947,42093451,42125216,42135342,42153471,42174028,42177627,42276690,42379459,42468786,42550713,42555151,42752179,42760159,42818107,42819932,42846866,42948646,43018384,43127701,43167088,43174196,43280053,43286140,43295790,43335630,43349816,43436489,43439062,43609846,43639398,43650468,43666794,43673663,43682454,43687314,43694180,43741793,43754475,43785024,43793286,43875513,43879293,43881756,43911848,43979335,43982827,44004990,44057422,44126713,44192905,44195066,44205870,44232589,44242319,44268639,44286599,44386519,44438319,44450312,44463979,44542583,44547512,44564336,44580158,44717740,44836739,44843164,44875090,44896027,44921069,44964940,44968821,44972047,44981236,44992936,45059872,45089056,45139788,45154313,45173482,45199978,45210594,45224262,45267938,45268711,45384126,45388781,45427117,45653378,45677035,45706963,45714893,45722142,45747461,45775351,45829559,45967240,46005007,46034727,46063832,46084047,46185535,46325045,46342918,46376884,46434490,46467495,46493955,46588744,46589798,46614189,46663074,46752084,46760467,46895919,46996021,47029390,47119896,47342956,47387942,47406957,47501106,47504253,47615530,47619119,47731581,47748580,47786330,47821282,47911142,47916556,47943913,48015899,48043135,48211239,48326385,48349640,48392040,48440597,48453564,48633123,48678131,48714878,48757858,48818125,48855472,48951449,48952679,49093964,49102085,49108740,49110887,49142883,49210516,49231746,49282708,49429338,49446580,49466932,49575563,49595180,49605881,49719075,49808934,49898268,49970479,50030044,50070798,50095590,50128004,50259326,50267563,50286029,50376100,50513749,50654145,50683380,50738196,50862849,50926965,51065591,51210689,51237418,51270309,51272144,51286821,51310727,51380948,51403091,51516914,51575404,51583919,51594122,51612581,51615160,51617949,51738193,51780194,51987199,51992935,52030840,52105040,52336063,52378876,52430944,52456625,52484016,52500795,52606903,52610935,52741788,52757414,52799065,52858096,52868254,52882263,53064255,53295508,53359912,53384110,53388696,53417299,53599541,53673706,53709046,53755235,53784216,53802088,53874863,53885113,53898172,53906826,53920692,53924317,53931114,54005915,54013730,54025186,54098281,54249695,54265665,54337370,54451129,54465160,54587022,54629177,54631300,54690441,54721012,54731341,54745495,54788602,54789924,54794624,54801691,54832589,54907335,55009418,55034690,55057368,55075734,55099705,55143862,55151357,55161813,55211702,55241404,55450216,55504591,55507282,55573991,55650688,55671818,55676009,55715825,55716844,55741447,55982918,56025589,56040559,56080804,56112085,56271698,56273560,56281204,56282812,56286996,56324906,56393751,56402998,56438150,56445489,56566987,56592121,56595329,56624566,56625050,56628682,56756281,56769483,56769515,56774336,56864075,56890308,56905404,56943077,56949167,56951575,57055722,57079600,57116942,57147013,57155138,57226707,57326450,57328667,57420878,57422023,57574205,57583696,57599691,57744070,57782673,57835178,57896427,57900027,58082292,58085041,58106335,58163533,58172112,58228819,58264143,58333402,58376173,58376380,58435120,58470492,58515427,58594710,58616584,58668628,58857594,58862605,58873472,58890869,58898596,58968112,58970047,59109081,59146045,59173050,59278791,59296622,59503488,59530436,59547733,59652713,59712331,59753028,59792552,59871343,59879762,59889267,59891597,59937997,59952956,60037247,60059531,60070830,60089947,60114114,60167005,60234027,60296414,60307445,60426980,60490254,60610683,60745171,60792759,60965196,61003916,61010044,61018607,61062236,61075309,61085326,61100394,61152487,61191368,61199553,61236776,61286408,61348356,61361128,61391833,61537028,61620583,61622749,61843923,61893402,61898534,61959572,61963086,62023828,62073021,62140421,62264569,62302590,62376947,62384092,62399439,62572245,62572843,62574453,62580270,62585958,62672692,62703676,62748853,62790847,62834237,63100581,63124536,63154039,63215611,63265956,63282162,63367319,63376211,63377113,63407322,63532879,63620636,63662193,63696080,63812042,63842083,63916932,63997736,64034738,64035577,64075017,64126065,64174090,64220499,64255319,64277884,64320882,64510011,64515015,64559080,64577726,64587368,64636825,64653347,64689692,64752487,64782687,64792289,64943673,64947767,64963849,64994166,64998395,65030055,65034926,65066656,65124384,65167107,65208421,65216963,65263563,65267601,65307018,65364639,65395352,65469932,65570687,65586226,65591852,65608897,65619662,65766015,65786995,65977215,65996887,66016412,66056750,66100999,66118990,66127204,66157405,66210437,66243105,66255470,66334611,66362450,66376325,66431898,66588230,66588759,66605099,66647979,66658348,66735525,66746696,66789129,66826678,66841636,66868464,66895070,66905039,66969953,66984404,67113378,67191910,67253123,67276993,67337493,67419775,67445923,67563100,67572069,67628671,67696056,67874724,67922847,67970944,68029417,68058598,68063881,68171076,68201213,68259656,68320783,68379248,68427306,68515299,68675631,68694354,68788786,68819501,68893272,68957152,68970740,69090945,69159523,69382314,69391046,69394331,69411592,69438784,69613735,69617250,69651616,69688161,69753220,69759361,69853271,69854348,69901806,69933070,69951871,69979500,70021638,70172424,70209610,70217050,70282212,70400144,70512420,70527219,70549655,70663486,70692446,70705474,70726131,70873135,71014260,71026050,71032407,71071198,71173716,71227164,71237619,71308979,71317921,71326928,71358629,71384188,71444171,71490124,71509998,71571534,71663280,71700890,71789167,72054267,72204493,72265354,72265641,72299146,72325903,72341322,72471857,72604350,72621544,72677184,72719181,72829217,72857353,72956298,73143538,73185564,73199726,73220091,73369866,73373638,73383435,73383729,73550903,73652887,73661324,73786254,73821841,73897951,73903345,73939148,73940182,74006611,74073179,74115761,74185599,74231698,74232383,74290748,74295570,74357489,74367293,74465994,74519638,74530068,74569415,74706789,74716420,74735264,74738331,74746904,74756720,74779265,74826533,74882648,74901573,74979034,75067119,75100011,75121250,75132233,75313836,75386706,75422603,75425958,75603030,75633400,75688533,75821926,75892770,75895682,75978294,76034432,76044814,76060096,76107186,76122503,76123101,76179876,76192940,76194907,76231429,76235079,76280485,76287842,76311836,76353932,76407380,76473588,76564179,76575193,76578744,76589004,76618171,76635159,76760419,76773794,76797041,76800272,76816347,76834747,76897371,77011569,77075989,77106238,77178877,77268096,77281915,77342242,77345996,77410222,77427430,77503141,77543626,77633607,77738243,77784934,77824570,77825966,77962643,78069641,78070360,78131214,78144711,78188098,78380054,78432051,78441434,78466921,78485842,78553612,78577227,78615613,78642666,78653747,78714927,78724628,78851593,78886942,79022410,79024956,79059719,79096672,79099887,79162414,79166248,79283180,79364382,79372282,79381447,79401852,79415256,79416951,79435744,79490920,79547011,79592349,79645956,79666795,79726647,80015479,80071842,80079285,80111529,80133426,80137057,80189026,80198278,80321585,80445691,80584850,80650459,80668329,80677391,80700649,80702696,80814372,80857914,80914803,81070876,81105087,81142521,81413946,81595369,81613274,81736845,81862671,81870156,81961510,82030816,82033289,82034029,82035322,82065219,82135767,82156985,82158444,82160996,82237546,82364166,82366231,82459456,82463481,82476038,82522070,82525244,82527477,82625105,82634116,82637985,82748602,82750999,82754633,82787399,82794791,82917287,82945040,82953977,83053711,83097881,83110293,83117386,83149791,83193362,83457667,83467211,83477247,83545109,83548141,83616647,83640388,83697066,83713452,83767156,83768210,83771473,83791246,83821019,83844948,83874097,83890377,83909951,83915434,83978447,83984041,84172737,84220495,84222317,84302903,84365900,84406886,84426197,84467539,84534683,84566680,84664613,84803779,84836188,84864278,84874099,84889066,84891224,84892033,84902277,84979935,85061044,85100072,85107098,85326589,85352353,85372703,85450299,85483398,85512521,85540533,85551399,85579921,85596692,85615030,85624298,85660629,85661627,85677479,85679743,85744754,85787870,85846768,86033652,86034710,86044483,86346843,86501123,86571224,86577946,86608294,86802511,86859343,86870653,86873961,86896746,87022519,87026977,87134220,87277012,87321081,87326688,87372615,87393303,87638728,87687713,87706254,87792750,87801385,87894322,87927137,87958370,87968870,87981128,88016381,88051257,88216034,88235178,88317894,88332847,88336749,88381267,88404034,88559286,88590557,88599665,88625952,88628167,88673842,88699817,88773086,88816615,88870588,88870992,88923063,88957681,88966797,89004276,89058319,89059766,89063247,89146019,89236999,89260787,89320736,89376868,89433397,89571193,89665432,89747270,89808796,89818447,89839755,89840730,89931968,90180436,90203040,90286781,90290165,90296789,90405571,90431509,90478114,90534326,90569698,90624706,90657539,90692405,90767960,90968107,90980577,91046817,91162997,91255796,91260381,91389629,91472098,91497543,91503940,91516054,91536537,91586551,91590740,91601650,91690790,91712935,91777994,91873025,91975271,91990603,91991760,92002362,92013727,92058024,92176297,92236951,92245068,92299527,92308971,92326920,92421434,92425734,92432037,92461206,92597000,92629661,92631969,92642175,92656843,92681959,92856708,92875909,92940546,92973872,93008239,93029523,93076225,93081704,93115077,93341991,93530920,93543103,93567492,93591121,93635972,93673434,93708065,93801518,93930757,93988272,94148661,94168153,94299187,94304600,94377615,94415637,94429681,94487544,94521855,94620771,94658159,94667355,94678440,94679259,94707534,94725947,94735710,94832323,94893795,94917218,94924472,94972969,95209720,95314040,95392106,95414305,95588576,95601749,95625605,95672009,95693218,95726509,95776528,95833268,95906372,95934954,95955525,95984225,95990855,96052484,96053931,96054235,96055133,96056137,96106803,96186172,96404451,96448620,96475096,96522077,96568649,96619842,96746889,96794252,96798857,96854281,96893014,96939915,96949310,96959078,96971823,96978510,97041695,97043380,97119545,97183221,97251441,97279728,97319598,97377441,97389931,97395411,97400958,97402274,97460636,97585603,97628099,97683355,97715699,97790599,97839056,97864209,97877378,97910308,97947183,97948291,97955283,98028186,98058228,98106842,98123954,98129590,98132210,98316497,98404012,98424361,98455414,98471075,98473373,98558493,98650503,98720683,98763048,98763140,98764532,98799714,99083701,99120544,99208899,99269847,99279191,99307769,99318418,99348141,99360198,99425264,99529562,99590178,99601962,99656482,99726655,99736412,99809139,99939181,99947100,99990537}, 937902));
        //106.455621
    }

    public double minmaxGasDist(int[] stations, int K) {
        double lo = 0, hi = 1e8;
        double mid = lo + (hi - lo) / 2;
        while (lo < (hi - 1e-6)) {
            mid = lo + (hi - lo) / 2;
            if (check(stations, K, mid)) {
                hi = mid;
            } else {
                lo = mid;
            }
        }
        return mid;
    }

    private boolean check(int[] stations, int k, double mid) {
        int used = 0;
        for (int i = 1; i < stations.length; i++) {
            used += (stations[i] - stations[i - 1]) / mid;
        }
        return used <= k;
    }
}
